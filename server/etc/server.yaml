service-name: mywebnote

server:
  bind: "0.0.0.0:8888"
  mgmt-bind: "0.0.0.0:11700"
  thread-max-pool: 32
  #cors:
  #  hosts: ["*"]
  #  headers: ["*"]
  #  methods: ["*"]

logging:
  file: /tmp/mywebnote/server.log
  pattern: "xxx" # e.g: "[yyyy-MM-dd T HH:mm:ss.SSS] [INFO] - users.rs:34 : Add to user jack01 ..."

db:
  type: SQLite # Mongo|SQLite
  sqlite:
    dir: /tmp/mywebnote/
  mongo:
    url: mongodb://127.0.0.1:27017/mywebnote
    database: mywebnote

cache:
  provider: Memory # Memory|Redis
  memory:
    initial-capacity: 32
    max-capacity: 65535
    ttl: 3600000
    eviction-policy: LRU
  redis:
    nodes: ["redis://127.0.0.1:6379"]
    #username: "" # eg: "default"
    #password: "" # eg: "bitnami"
    connection-timeout: 3000
    response-timeout: 6000
    retries: 1
    max-retry-wait: 65536
    min-retry-wait: 1280
    read-from-replica: true

auth:
  jwt-ak-name: "_ak"
  jwt-rk-name: "_rk"
  jwt-validity-ak: 3600000
  jwt-validity-rk: 86400000
  jwt-secret: "changeit"
  anonymous-paths:
    - "/_/healthz"
    - "/_/healthz/**"
    # The default accessing to swagger ui required authentication.
    #- "/swagger-ui/"
    #- "/swagger-ui/openapi.json"
    - "/public/**"
    - "/static/**"
  oidc:
    enabled: true
    client-id: "mywebnote-wl4g"
    client-secret: "ZySKr09pTaG5xpyfPI28ARMp4MV3GXxB"
    issue-url: "https://iam.wl4g.com/realms/master"
    redirect-url: "http://localhost:8888/auth/callback/oidc"
    scope: "openid profile email"
  # see:https://github.com/settings/developers
  # see:https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/authorizing-oauth-apps
  github:
    enabled: true
    client-id: "Ov23li21SkhoBFIQaGPD"
    client-secret: "374b9761778707170e6538932974ea940b45972f"
    auth-url: "https://github.com/login/oauth/authorize"
    token-url: "https://github.com/login/oauth/access_token"
    redirect-url: "http://localhost:8888/auth/callback/github"
    # see:https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps
    scope: "user"
    user-info-url: "https://api.github.com/user"
  login-url: "/static/login.html"
  success-url: "/static/index.html"
  unauthz-url: "/static/403.html"

swagger:
  enabled: true
  # title: "My Webnote API Server"
  # description: "The My Webnote API Server"
  # version: "1.0.0"
  # license_name: "Apache 2.0"
  # license_url: "https://www.apache.org/licenses/LICENSE-2.0"
  # contact_name: "MyWebnote API"
  # contact_email: "jameswong1376@gmail.com"
  # contact_url: "https://github.com/wl4g/my-webnote"
  # terms_of_service: "api/terms-of-service"
  swagger_ui_path: "/swagger-ui"
  swagger_openapi_url: "/swagger-ui/openapi.json"

monitoring:
  enabled: true
  # Notice: More OTEL custom configuration use to environment: OTEL_SPAN_xxx
  # see to: opentelemetry_sdk::trace::config::default()
  otel:
    endpoint: "http://localhost:4317"
    protocol: grpc # Optional: http/protobuf,http/json,grpc
    timeout: 10000
